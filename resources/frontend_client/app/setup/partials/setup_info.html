<div class="SetupSteps wrapper">
    <section class="SetupStep bordered rounded shadowed relative" ng-class="{ 'SetupStep--active' : activeStep == 'user', 'SetupStep--completed' : completedSteps.user }">
            <div>
                <span class="SetupStep-indicator flex layout-centered absolute bordered">
                    <span class="SetupStep-number">1</span>
                    <cv-check-icon class="SetupStep-check" width="16px" height="16px"></cv-check-icon>
                </span>
                <h3 class="SetupStep-title ml4 text-brand">What should we call you?</h3>
            </div>
            <form class="Form-new" name="form" ng-submit="createOrgAndUser()" novalidate ng-if="activeStep == 'user'" novalidate>
                <div class="Form-field" mb-form-field="first_name">
                    <mb-form-label display-name="First name" field-name="first_name"></mb-form-label>
                    <input class="Form-input Form-offset full" name="first_name" placeholder="John" ng-model="newUser.first_name" required autofocus />
                    <span class="Form-charm"></span>
                </div>

                <div class="Form-field" mb-form-field="last_name">
                    <mb-form-label display-name="Last name" field-name="last_name"></mb-form-label>
                    <input class="Form-input Form-offset full" name="last_name" placeholder="Doe" ng-model="newUser.last_name" required />
                    <span class="Form-charm"></span>
                </div>

                <div class="Form-field" mb-form-field="email">
                    <mb-form-label display-name="Email" field-name="email"></mb-form-label>
                    <input class="Form-input Form-offset full" name="email" placeholder="johndoe@mycompany.com" ng-model="newUser.email" required />
                    <span class="Form-charm"></span>
                </div>

                <div class="Form-field" mb-form-field="password">
                    <mb-form-label display-name="Create a password - Must be 8 characters long and include one upper case letter, one a number and one special character" field-name="password"></mb-form-label>
                    <input class="Form-input Form-offset full" name="password" type="password" placeholder="Create a new password" ng-model="newUser.password" required>
                    <span class="Form-charm"></span>
                </div>

                <div class="Form-field" mb-form-field="repeated_password">
                    <mb-form-label display-name="Verify your new password" field-name="password"></mb-form-label>
                    <input class="Form-input Form-offset full" type="password" placeholder="Type it again so we can verify it" ng-model="newUser.repeated_password" required>
                    <span class="Form-charm"></span>
                </div>

                <div class="Form-field" mb-form-field="organization">
                    <mb-form-label display-name="Organization name" field-name="password"></mb-form-label>
                    <input class="Form-input Form-offset full" name="organization" type="text" placeholder="Organization name" ng-model="userOrgName" autofocus required>
                    <span class="Form-charm"></span>
                </div>

                <div class="Form-actions">
                    <button class="Button" ng-class="{'Button--primary': form.$valid}" ng-click="save(newUser)" ng-disabled="!form.$valid">
                        Create
                    </button>
                </div>
            </form>
          <div class="bg-error text-white p2 rounded" ng-show="error">
              {{error}}
          </div>
    </section>

    <section class="SetupStep bordered rounded shadowed relative" ng-class="{ 'SetupStep--active' : activeStep == 'database', 'SetupStep--completed' : completedSteps.database }">
        <div>
            <span class="SetupStep-indicator flex layout-centered absolute bordered">
                <span class="SetupStep-number">2</span>
                <cv-check-icon class="SetupStep-check" width="16px" height="16px"></cv-check-icon>
            </span>
            <h3 class="ml4 text-brand">Add your first database</h3>
        </div>
        <div ng-controller="DatabaseEdit" ng-if="activeStep == 'database'">
            <form class="Form-new bordered rounded shadowed" name="form" novalidate>
                <!-- Form -->
                <div ng-include="'/app/admin/databases/partials/database_edit_forms.html'"></div>

                <!-- Bottom Actions -->
                <div class="Form-actions">
                    <button class="Button" ng-class="{'Button--primary': form.$valid}" ng-click="save(database, details, false)" ng-disabled="!form.$valid">
                        Save
                    </button>
                    <mb-form-message></mb-form-message>
                </div>
            </form>
        </div>
    </section>

    <section class="SetupStep SetupStep--active bordered rounded shadowed flex layout-centered flex-column relative" ng-if="activeStep == 'finish'">
        <h3 class="text-brand">You're all set!</h3>
        <div class="bordered rounded p2 text-brand flex justify-center">
            <cv-loading-icon class="inline-block mr2"></cv-loading-icon>
            Importing data and doing a bit of science.
        </div>
        <p class="text-body">(This may take a little while depending on the size of your data, but you can start exploring  any data weâ€™ve finished importing right away.)</p>

        <button class="Button Button--primary">Take me to my data</button>
    </section>
</div>
