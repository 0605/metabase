;; gorilla-repl.fileformat = 1

;; **
;;; # Metabase Common MBQL forms
;;; 
;;; This is a document to simplify working with MBQL for data science-y types as well as people like me (Sameer) with no memory
;; **

;; @@
(ns parched-sanctuary
  (:require [gorilla-plot.core :as plot])
  (require metabase.db)
  (require toucan.db))


(metabase.db/setup-db!)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}
;; <=

;; **
;;; # Tables
;; **

;; @@
; Fetch a table by id?
(toucan.db/select-one 'Table :id 1)
;; @@

;; @@
; Get a table's rows?
(metabase.query-processor/process-query
  {:database 1
   :type :query
   :query {:source-table 1
           :limit 10}})
;; @@

;; @@

; how do I get all the fields of a table?
(toucan.db/select 'Field :table_id 1)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:description</span>","value":":description"},{"type":"html","content":"<span class='clj-string'>&quot;The date and time an order was submitted.&quot;</span>","value":"\"The date and time an order was submitted.\""}],"value":"[:description \"The date and time an order was submitted.\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:table_id</span>","value":":table_id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:table_id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:special_type</span>","value":":special_type"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:special_type nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-string'>&quot;CREATED_AT&quot;</span>","value":"\"CREATED_AT\""}],"value":"[:name \"CREATED_AT\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:caveats</span>","value":":caveats"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:caveats nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:fk_target_field_id</span>","value":":fk_target_field_id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:fk_target_field_id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:updated_at</span>","value":":updated_at"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:06.573000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:06.573000000-00:00\""}],"value":"[:updated_at #inst \"2016-12-20T02:02:06.573000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:active</span>","value":":active"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:active true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:parent_id</span>","value":":parent_id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:parent_id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:raw_column_id</span>","value":":raw_column_id"},{"type":"html","content":"<span class='clj-unkown'>9</span>","value":"9"}],"value":"[:raw_column_id 9]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:last_analyzed</span>","value":":last_analyzed"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:07.559000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:07.559000000-00:00\""}],"value":"[:last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:position</span>","value":":position"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:position 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:visibility_type</span>","value":":visibility_type"},{"type":"html","content":"<span class='clj-keyword'>:normal</span>","value":":normal"}],"value":"[:visibility_type :normal]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:preview_display</span>","value":":preview_display"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:preview_display true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:display_name</span>","value":":display_name"},{"type":"html","content":"<span class='clj-string'>&quot;Created At&quot;</span>","value":"\"Created At\""}],"value":"[:display_name \"Created At\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:created_at</span>","value":":created_at"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:06.573000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:06.573000000-00:00\""}],"value":"[:created_at #inst \"2016-12-20T02:02:06.573000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:base_type</span>","value":":base_type"},{"type":"html","content":"<span class='clj-keyword'>:type/DateTime</span>","value":":type/DateTime"}],"value":"[:base_type :type/DateTime]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:points_of_interest</span>","value":":points_of_interest"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:points_of_interest nil]"}],"value":"#metabase.models.field.FieldInstance{:description \"The date and time an order was submitted.\", :table_id 1, :special_type nil, :name \"CREATED_AT\", :caveats nil, :fk_target_field_id nil, :updated_at #inst \"2016-12-20T02:02:06.573000000-00:00\", :active true, :parent_id nil, :id 1, :raw_column_id 9, :last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\", :position 0, :visibility_type :normal, :preview_display true, :display_name \"Created At\", :created_at #inst \"2016-12-20T02:02:06.573000000-00:00\", :base_type :type/DateTime, :points_of_interest nil}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:description</span>","value":":description"},{"type":"html","content":"<span class='clj-string'>&quot;This is a unique ID for the product. It is also called the “Invoice number” or “Confirmation number” in customer facing emails and screens.&quot;</span>","value":"\"This is a unique ID for the product. It is also called the “Invoice number” or “Confirmation number” in customer facing emails and screens.\""}],"value":"[:description \"This is a unique ID for the product. It is also called the “Invoice number” or “Confirmation number” in customer facing emails and screens.\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:table_id</span>","value":":table_id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:table_id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:special_type</span>","value":":special_type"},{"type":"html","content":"<span class='clj-keyword'>:type/PK</span>","value":":type/PK"}],"value":"[:special_type :type/PK]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-string'>&quot;ID&quot;</span>","value":"\"ID\""}],"value":"[:name \"ID\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:caveats</span>","value":":caveats"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:caveats nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:fk_target_field_id</span>","value":":fk_target_field_id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:fk_target_field_id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:updated_at</span>","value":":updated_at"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:06.577000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:06.577000000-00:00\""}],"value":"[:updated_at #inst \"2016-12-20T02:02:06.577000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:active</span>","value":":active"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:active true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:parent_id</span>","value":":parent_id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:parent_id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>2</span>","value":"2"}],"value":"[:id 2]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:raw_column_id</span>","value":":raw_column_id"},{"type":"html","content":"<span class='clj-unkown'>10</span>","value":"10"}],"value":"[:raw_column_id 10]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:last_analyzed</span>","value":":last_analyzed"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:07.559000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:07.559000000-00:00\""}],"value":"[:last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:position</span>","value":":position"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:position 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:visibility_type</span>","value":":visibility_type"},{"type":"html","content":"<span class='clj-keyword'>:normal</span>","value":":normal"}],"value":"[:visibility_type :normal]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:preview_display</span>","value":":preview_display"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:preview_display true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:display_name</span>","value":":display_name"},{"type":"html","content":"<span class='clj-string'>&quot;ID&quot;</span>","value":"\"ID\""}],"value":"[:display_name \"ID\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:created_at</span>","value":":created_at"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:06.577000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:06.577000000-00:00\""}],"value":"[:created_at #inst \"2016-12-20T02:02:06.577000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:base_type</span>","value":":base_type"},{"type":"html","content":"<span class='clj-keyword'>:type/BigInteger</span>","value":":type/BigInteger"}],"value":"[:base_type :type/BigInteger]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:points_of_interest</span>","value":":points_of_interest"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:points_of_interest nil]"}],"value":"#metabase.models.field.FieldInstance{:description \"This is a unique ID for the product. It is also called the “Invoice number” or “Confirmation number” in customer facing emails and screens.\", :table_id 1, :special_type :type/PK, :name \"ID\", :caveats nil, :fk_target_field_id nil, :updated_at #inst \"2016-12-20T02:02:06.577000000-00:00\", :active true, :parent_id nil, :id 2, :raw_column_id 10, :last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\", :position 0, :visibility_type :normal, :preview_display true, :display_name \"ID\", :created_at #inst \"2016-12-20T02:02:06.577000000-00:00\", :base_type :type/BigInteger, :points_of_interest nil}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:description</span>","value":":description"},{"type":"html","content":"<span class='clj-string'>&quot;The product ID. This is an internal identifier for the product, NOT the SKU.&quot;</span>","value":"\"The product ID. This is an internal identifier for the product, NOT the SKU.\""}],"value":"[:description \"The product ID. This is an internal identifier for the product, NOT the SKU.\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:table_id</span>","value":":table_id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:table_id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:special_type</span>","value":":special_type"},{"type":"html","content":"<span class='clj-keyword'>:type/FK</span>","value":":type/FK"}],"value":"[:special_type :type/FK]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-string'>&quot;PRODUCT_ID&quot;</span>","value":"\"PRODUCT_ID\""}],"value":"[:name \"PRODUCT_ID\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:caveats</span>","value":":caveats"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:caveats nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:fk_target_field_id</span>","value":":fk_target_field_id"},{"type":"html","content":"<span class='clj-unkown'>24</span>","value":"24"}],"value":"[:fk_target_field_id 24]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:updated_at</span>","value":":updated_at"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:06.751000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:06.751000000-00:00\""}],"value":"[:updated_at #inst \"2016-12-20T02:02:06.751000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:active</span>","value":":active"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:active true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:parent_id</span>","value":":parent_id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:parent_id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>3</span>","value":"3"}],"value":"[:id 3]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:raw_column_id</span>","value":":raw_column_id"},{"type":"html","content":"<span class='clj-unkown'>11</span>","value":"11"}],"value":"[:raw_column_id 11]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:last_analyzed</span>","value":":last_analyzed"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:07.559000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:07.559000000-00:00\""}],"value":"[:last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:position</span>","value":":position"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:position 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:visibility_type</span>","value":":visibility_type"},{"type":"html","content":"<span class='clj-keyword'>:normal</span>","value":":normal"}],"value":"[:visibility_type :normal]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:preview_display</span>","value":":preview_display"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:preview_display true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:display_name</span>","value":":display_name"},{"type":"html","content":"<span class='clj-string'>&quot;Product ID&quot;</span>","value":"\"Product ID\""}],"value":"[:display_name \"Product ID\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:created_at</span>","value":":created_at"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:06.588000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:06.588000000-00:00\""}],"value":"[:created_at #inst \"2016-12-20T02:02:06.588000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:base_type</span>","value":":base_type"},{"type":"html","content":"<span class='clj-keyword'>:type/Integer</span>","value":":type/Integer"}],"value":"[:base_type :type/Integer]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:points_of_interest</span>","value":":points_of_interest"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:points_of_interest nil]"}],"value":"#metabase.models.field.FieldInstance{:description \"The product ID. This is an internal identifier for the product, NOT the SKU.\", :table_id 1, :special_type :type/FK, :name \"PRODUCT_ID\", :caveats nil, :fk_target_field_id 24, :updated_at #inst \"2016-12-20T02:02:06.751000000-00:00\", :active true, :parent_id nil, :id 3, :raw_column_id 11, :last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\", :position 0, :visibility_type :normal, :preview_display true, :display_name \"Product ID\", :created_at #inst \"2016-12-20T02:02:06.588000000-00:00\", :base_type :type/Integer, :points_of_interest nil}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:description</span>","value":":description"},{"type":"html","content":"<span class='clj-string'>&quot;The raw, pre-tax cost of the order. Note that this might be different in the future from the product price due to promotions, credits, etc.&quot;</span>","value":"\"The raw, pre-tax cost of the order. Note that this might be different in the future from the product price due to promotions, credits, etc.\""}],"value":"[:description \"The raw, pre-tax cost of the order. Note that this might be different in the future from the product price due to promotions, credits, etc.\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:table_id</span>","value":":table_id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:table_id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:special_type</span>","value":":special_type"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:special_type nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-string'>&quot;SUBTOTAL&quot;</span>","value":"\"SUBTOTAL\""}],"value":"[:name \"SUBTOTAL\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:caveats</span>","value":":caveats"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:caveats nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:fk_target_field_id</span>","value":":fk_target_field_id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:fk_target_field_id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:updated_at</span>","value":":updated_at"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:06.605000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:06.605000000-00:00\""}],"value":"[:updated_at #inst \"2016-12-20T02:02:06.605000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:active</span>","value":":active"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:active true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:parent_id</span>","value":":parent_id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:parent_id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>4</span>","value":"4"}],"value":"[:id 4]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:raw_column_id</span>","value":":raw_column_id"},{"type":"html","content":"<span class='clj-unkown'>12</span>","value":"12"}],"value":"[:raw_column_id 12]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:last_analyzed</span>","value":":last_analyzed"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:07.559000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:07.559000000-00:00\""}],"value":"[:last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:position</span>","value":":position"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:position 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:visibility_type</span>","value":":visibility_type"},{"type":"html","content":"<span class='clj-keyword'>:normal</span>","value":":normal"}],"value":"[:visibility_type :normal]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:preview_display</span>","value":":preview_display"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:preview_display true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:display_name</span>","value":":display_name"},{"type":"html","content":"<span class='clj-string'>&quot;Subtotal&quot;</span>","value":"\"Subtotal\""}],"value":"[:display_name \"Subtotal\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:created_at</span>","value":":created_at"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:06.605000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:06.605000000-00:00\""}],"value":"[:created_at #inst \"2016-12-20T02:02:06.605000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:base_type</span>","value":":base_type"},{"type":"html","content":"<span class='clj-keyword'>:type/Float</span>","value":":type/Float"}],"value":"[:base_type :type/Float]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:points_of_interest</span>","value":":points_of_interest"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:points_of_interest nil]"}],"value":"#metabase.models.field.FieldInstance{:description \"The raw, pre-tax cost of the order. Note that this might be different in the future from the product price due to promotions, credits, etc.\", :table_id 1, :special_type nil, :name \"SUBTOTAL\", :caveats nil, :fk_target_field_id nil, :updated_at #inst \"2016-12-20T02:02:06.605000000-00:00\", :active true, :parent_id nil, :id 4, :raw_column_id 12, :last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\", :position 0, :visibility_type :normal, :preview_display true, :display_name \"Subtotal\", :created_at #inst \"2016-12-20T02:02:06.605000000-00:00\", :base_type :type/Float, :points_of_interest nil}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:description</span>","value":":description"},{"type":"html","content":"<span class='clj-string'>&quot;This is the amount of local and federal taxes that are collected on the purchase. Note that other governmental fees on some products are not included here, but instead are accounted for in the subtotal.&quot;</span>","value":"\"This is the amount of local and federal taxes that are collected on the purchase. Note that other governmental fees on some products are not included here, but instead are accounted for in the subtotal.\""}],"value":"[:description \"This is the amount of local and federal taxes that are collected on the purchase. Note that other governmental fees on some products are not included here, but instead are accounted for in the subtotal.\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:table_id</span>","value":":table_id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:table_id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:special_type</span>","value":":special_type"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:special_type nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-string'>&quot;TAX&quot;</span>","value":"\"TAX\""}],"value":"[:name \"TAX\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:caveats</span>","value":":caveats"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:caveats nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:fk_target_field_id</span>","value":":fk_target_field_id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:fk_target_field_id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:updated_at</span>","value":":updated_at"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:06.609000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:06.609000000-00:00\""}],"value":"[:updated_at #inst \"2016-12-20T02:02:06.609000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:active</span>","value":":active"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:active true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:parent_id</span>","value":":parent_id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:parent_id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>5</span>","value":"5"}],"value":"[:id 5]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:raw_column_id</span>","value":":raw_column_id"},{"type":"html","content":"<span class='clj-unkown'>13</span>","value":"13"}],"value":"[:raw_column_id 13]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:last_analyzed</span>","value":":last_analyzed"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:07.559000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:07.559000000-00:00\""}],"value":"[:last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:position</span>","value":":position"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:position 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:visibility_type</span>","value":":visibility_type"},{"type":"html","content":"<span class='clj-keyword'>:normal</span>","value":":normal"}],"value":"[:visibility_type :normal]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:preview_display</span>","value":":preview_display"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:preview_display true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:display_name</span>","value":":display_name"},{"type":"html","content":"<span class='clj-string'>&quot;Tax&quot;</span>","value":"\"Tax\""}],"value":"[:display_name \"Tax\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:created_at</span>","value":":created_at"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:06.609000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:06.609000000-00:00\""}],"value":"[:created_at #inst \"2016-12-20T02:02:06.609000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:base_type</span>","value":":base_type"},{"type":"html","content":"<span class='clj-keyword'>:type/Float</span>","value":":type/Float"}],"value":"[:base_type :type/Float]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:points_of_interest</span>","value":":points_of_interest"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:points_of_interest nil]"}],"value":"#metabase.models.field.FieldInstance{:description \"This is the amount of local and federal taxes that are collected on the purchase. Note that other governmental fees on some products are not included here, but instead are accounted for in the subtotal.\", :table_id 1, :special_type nil, :name \"TAX\", :caveats nil, :fk_target_field_id nil, :updated_at #inst \"2016-12-20T02:02:06.609000000-00:00\", :active true, :parent_id nil, :id 5, :raw_column_id 13, :last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\", :position 0, :visibility_type :normal, :preview_display true, :display_name \"Tax\", :created_at #inst \"2016-12-20T02:02:06.609000000-00:00\", :base_type :type/Float, :points_of_interest nil}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:description</span>","value":":description"},{"type":"html","content":"<span class='clj-string'>&quot;The total billed amount.&quot;</span>","value":"\"The total billed amount.\""}],"value":"[:description \"The total billed amount.\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:table_id</span>","value":":table_id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:table_id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:special_type</span>","value":":special_type"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:special_type nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-string'>&quot;TOTAL&quot;</span>","value":"\"TOTAL\""}],"value":"[:name \"TOTAL\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:caveats</span>","value":":caveats"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:caveats nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:fk_target_field_id</span>","value":":fk_target_field_id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:fk_target_field_id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:updated_at</span>","value":":updated_at"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:06.613000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:06.613000000-00:00\""}],"value":"[:updated_at #inst \"2016-12-20T02:02:06.613000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:active</span>","value":":active"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:active true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:parent_id</span>","value":":parent_id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:parent_id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>6</span>","value":"6"}],"value":"[:id 6]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:raw_column_id</span>","value":":raw_column_id"},{"type":"html","content":"<span class='clj-unkown'>14</span>","value":"14"}],"value":"[:raw_column_id 14]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:last_analyzed</span>","value":":last_analyzed"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:07.559000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:07.559000000-00:00\""}],"value":"[:last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:position</span>","value":":position"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:position 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:visibility_type</span>","value":":visibility_type"},{"type":"html","content":"<span class='clj-keyword'>:normal</span>","value":":normal"}],"value":"[:visibility_type :normal]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:preview_display</span>","value":":preview_display"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:preview_display true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:display_name</span>","value":":display_name"},{"type":"html","content":"<span class='clj-string'>&quot;Total&quot;</span>","value":"\"Total\""}],"value":"[:display_name \"Total\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:created_at</span>","value":":created_at"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:06.613000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:06.613000000-00:00\""}],"value":"[:created_at #inst \"2016-12-20T02:02:06.613000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:base_type</span>","value":":base_type"},{"type":"html","content":"<span class='clj-keyword'>:type/Float</span>","value":":type/Float"}],"value":"[:base_type :type/Float]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:points_of_interest</span>","value":":points_of_interest"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:points_of_interest nil]"}],"value":"#metabase.models.field.FieldInstance{:description \"The total billed amount.\", :table_id 1, :special_type nil, :name \"TOTAL\", :caveats nil, :fk_target_field_id nil, :updated_at #inst \"2016-12-20T02:02:06.613000000-00:00\", :active true, :parent_id nil, :id 6, :raw_column_id 14, :last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\", :position 0, :visibility_type :normal, :preview_display true, :display_name \"Total\", :created_at #inst \"2016-12-20T02:02:06.613000000-00:00\", :base_type :type/Float, :points_of_interest nil}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:description</span>","value":":description"},{"type":"html","content":"<span class='clj-string'>&quot;The id of the user who made this order. Note that in some cases where an order was created on behalf of a customer who phoned the order in, this might be the employee who handled the request.&quot;</span>","value":"\"The id of the user who made this order. Note that in some cases where an order was created on behalf of a customer who phoned the order in, this might be the employee who handled the request.\""}],"value":"[:description \"The id of the user who made this order. Note that in some cases where an order was created on behalf of a customer who phoned the order in, this might be the employee who handled the request.\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:table_id</span>","value":":table_id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:table_id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:special_type</span>","value":":special_type"},{"type":"html","content":"<span class='clj-keyword'>:type/FK</span>","value":":type/FK"}],"value":"[:special_type :type/FK]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-string'>&quot;USER_ID&quot;</span>","value":"\"USER_ID\""}],"value":"[:name \"USER_ID\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:caveats</span>","value":":caveats"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:caveats nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:fk_target_field_id</span>","value":":fk_target_field_id"},{"type":"html","content":"<span class='clj-unkown'>13</span>","value":"13"}],"value":"[:fk_target_field_id 13]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:updated_at</span>","value":":updated_at"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:06.754000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:06.754000000-00:00\""}],"value":"[:updated_at #inst \"2016-12-20T02:02:06.754000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:active</span>","value":":active"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:active true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:parent_id</span>","value":":parent_id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:parent_id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>7</span>","value":"7"}],"value":"[:id 7]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:raw_column_id</span>","value":":raw_column_id"},{"type":"html","content":"<span class='clj-unkown'>15</span>","value":"15"}],"value":"[:raw_column_id 15]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:last_analyzed</span>","value":":last_analyzed"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:07.559000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:07.559000000-00:00\""}],"value":"[:last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:position</span>","value":":position"},{"type":"html","content":"<span class='clj-unkown'>0</span>","value":"0"}],"value":"[:position 0]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:visibility_type</span>","value":":visibility_type"},{"type":"html","content":"<span class='clj-keyword'>:normal</span>","value":":normal"}],"value":"[:visibility_type :normal]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:preview_display</span>","value":":preview_display"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:preview_display true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:display_name</span>","value":":display_name"},{"type":"html","content":"<span class='clj-string'>&quot;User ID&quot;</span>","value":"\"User ID\""}],"value":"[:display_name \"User ID\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:created_at</span>","value":":created_at"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-20T02:02:06.618000000-00:00&quot;</span>","value":"#inst \"2016-12-20T02:02:06.618000000-00:00\""}],"value":"[:created_at #inst \"2016-12-20T02:02:06.618000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:base_type</span>","value":":base_type"},{"type":"html","content":"<span class='clj-keyword'>:type/Integer</span>","value":":type/Integer"}],"value":"[:base_type :type/Integer]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:points_of_interest</span>","value":":points_of_interest"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:points_of_interest nil]"}],"value":"#metabase.models.field.FieldInstance{:description \"The id of the user who made this order. Note that in some cases where an order was created on behalf of a customer who phoned the order in, this might be the employee who handled the request.\", :table_id 1, :special_type :type/FK, :name \"USER_ID\", :caveats nil, :fk_target_field_id 13, :updated_at #inst \"2016-12-20T02:02:06.754000000-00:00\", :active true, :parent_id nil, :id 7, :raw_column_id 15, :last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\", :position 0, :visibility_type :normal, :preview_display true, :display_name \"User ID\", :created_at #inst \"2016-12-20T02:02:06.618000000-00:00\", :base_type :type/Integer, :points_of_interest nil}"}],"value":"[#metabase.models.field.FieldInstance{:description \"The date and time an order was submitted.\", :table_id 1, :special_type nil, :name \"CREATED_AT\", :caveats nil, :fk_target_field_id nil, :updated_at #inst \"2016-12-20T02:02:06.573000000-00:00\", :active true, :parent_id nil, :id 1, :raw_column_id 9, :last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\", :position 0, :visibility_type :normal, :preview_display true, :display_name \"Created At\", :created_at #inst \"2016-12-20T02:02:06.573000000-00:00\", :base_type :type/DateTime, :points_of_interest nil} #metabase.models.field.FieldInstance{:description \"This is a unique ID for the product. It is also called the “Invoice number” or “Confirmation number” in customer facing emails and screens.\", :table_id 1, :special_type :type/PK, :name \"ID\", :caveats nil, :fk_target_field_id nil, :updated_at #inst \"2016-12-20T02:02:06.577000000-00:00\", :active true, :parent_id nil, :id 2, :raw_column_id 10, :last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\", :position 0, :visibility_type :normal, :preview_display true, :display_name \"ID\", :created_at #inst \"2016-12-20T02:02:06.577000000-00:00\", :base_type :type/BigInteger, :points_of_interest nil} #metabase.models.field.FieldInstance{:description \"The product ID. This is an internal identifier for the product, NOT the SKU.\", :table_id 1, :special_type :type/FK, :name \"PRODUCT_ID\", :caveats nil, :fk_target_field_id 24, :updated_at #inst \"2016-12-20T02:02:06.751000000-00:00\", :active true, :parent_id nil, :id 3, :raw_column_id 11, :last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\", :position 0, :visibility_type :normal, :preview_display true, :display_name \"Product ID\", :created_at #inst \"2016-12-20T02:02:06.588000000-00:00\", :base_type :type/Integer, :points_of_interest nil} #metabase.models.field.FieldInstance{:description \"The raw, pre-tax cost of the order. Note that this might be different in the future from the product price due to promotions, credits, etc.\", :table_id 1, :special_type nil, :name \"SUBTOTAL\", :caveats nil, :fk_target_field_id nil, :updated_at #inst \"2016-12-20T02:02:06.605000000-00:00\", :active true, :parent_id nil, :id 4, :raw_column_id 12, :last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\", :position 0, :visibility_type :normal, :preview_display true, :display_name \"Subtotal\", :created_at #inst \"2016-12-20T02:02:06.605000000-00:00\", :base_type :type/Float, :points_of_interest nil} #metabase.models.field.FieldInstance{:description \"This is the amount of local and federal taxes that are collected on the purchase. Note that other governmental fees on some products are not included here, but instead are accounted for in the subtotal.\", :table_id 1, :special_type nil, :name \"TAX\", :caveats nil, :fk_target_field_id nil, :updated_at #inst \"2016-12-20T02:02:06.609000000-00:00\", :active true, :parent_id nil, :id 5, :raw_column_id 13, :last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\", :position 0, :visibility_type :normal, :preview_display true, :display_name \"Tax\", :created_at #inst \"2016-12-20T02:02:06.609000000-00:00\", :base_type :type/Float, :points_of_interest nil} #metabase.models.field.FieldInstance{:description \"The total billed amount.\", :table_id 1, :special_type nil, :name \"TOTAL\", :caveats nil, :fk_target_field_id nil, :updated_at #inst \"2016-12-20T02:02:06.613000000-00:00\", :active true, :parent_id nil, :id 6, :raw_column_id 14, :last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\", :position 0, :visibility_type :normal, :preview_display true, :display_name \"Total\", :created_at #inst \"2016-12-20T02:02:06.613000000-00:00\", :base_type :type/Float, :points_of_interest nil} #metabase.models.field.FieldInstance{:description \"The id of the user who made this order. Note that in some cases where an order was created on behalf of a customer who phoned the order in, this might be the employee who handled the request.\", :table_id 1, :special_type :type/FK, :name \"USER_ID\", :caveats nil, :fk_target_field_id 13, :updated_at #inst \"2016-12-20T02:02:06.754000000-00:00\", :active true, :parent_id nil, :id 7, :raw_column_id 15, :last_analyzed #inst \"2016-12-20T02:02:07.559000000-00:00\", :position 0, :visibility_type :normal, :preview_display true, :display_name \"User ID\", :created_at #inst \"2016-12-20T02:02:06.618000000-00:00\", :base_type :type/Integer, :points_of_interest nil}]"}
;; <=

;; **
;;; # Fields
;; **

;; @@
; how do I fetch a field by id?
(toucan.db/select-one 'Field :id 1)

;; @@

;; @@

; how do I fetch a sample of values for a field
(metabase.query-processor/process-query
  {:database 1
   :type :query
   :query {:fields [[:field-id 1]]
           :source-table 1
           :limit 10}})
;; @@

;; @@


; how do I fetch all the values + their frequencies (eg, count grouped by field)
(metabase.query-processor/process-query
  {:database 1
   :type :query
   :query {:aggregation [:count]
           :breakout [[:field-id 1]]
           :source-table 1
           :limit 10}})
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:row_count</span>","value":":row_count"},{"type":"html","content":"<span class='clj-unkown'>10</span>","value":"10"}],"value":"[:row_count 10]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:status</span>","value":":status"},{"type":"html","content":"<span class='clj-keyword'>:completed</span>","value":":completed"}],"value":"[:status :completed]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:data</span>","value":":data"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rows</span>","value":":rows"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2015-09-22T00:00:00.000-07:00&quot;</span>","value":"\"2015-09-22T00:00:00.000-07:00\""},{"type":"html","content":"<span class='clj-long'>2</span>","value":"2"}],"value":"(\"2015-09-22T00:00:00.000-07:00\" 2)"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2015-09-25T00:00:00.000-07:00&quot;</span>","value":"\"2015-09-25T00:00:00.000-07:00\""},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"(\"2015-09-25T00:00:00.000-07:00\" 1)"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2015-09-27T00:00:00.000-07:00&quot;</span>","value":"\"2015-09-27T00:00:00.000-07:00\""},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"(\"2015-09-27T00:00:00.000-07:00\" 1)"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2015-09-28T00:00:00.000-07:00&quot;</span>","value":"\"2015-09-28T00:00:00.000-07:00\""},{"type":"html","content":"<span class='clj-long'>2</span>","value":"2"}],"value":"(\"2015-09-28T00:00:00.000-07:00\" 2)"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2015-09-30T00:00:00.000-07:00&quot;</span>","value":"\"2015-09-30T00:00:00.000-07:00\""},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"(\"2015-09-30T00:00:00.000-07:00\" 1)"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2015-10-01T00:00:00.000-07:00&quot;</span>","value":"\"2015-10-01T00:00:00.000-07:00\""},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"(\"2015-10-01T00:00:00.000-07:00\" 1)"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2015-10-02T00:00:00.000-07:00&quot;</span>","value":"\"2015-10-02T00:00:00.000-07:00\""},{"type":"html","content":"<span class='clj-long'>2</span>","value":"2"}],"value":"(\"2015-10-02T00:00:00.000-07:00\" 2)"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2015-10-03T00:00:00.000-07:00&quot;</span>","value":"\"2015-10-03T00:00:00.000-07:00\""},{"type":"html","content":"<span class='clj-long'>3</span>","value":"3"}],"value":"(\"2015-10-03T00:00:00.000-07:00\" 3)"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2015-10-04T00:00:00.000-07:00&quot;</span>","value":"\"2015-10-04T00:00:00.000-07:00\""},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"(\"2015-10-04T00:00:00.000-07:00\" 1)"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2015-10-05T00:00:00.000-07:00&quot;</span>","value":"\"2015-10-05T00:00:00.000-07:00\""},{"type":"html","content":"<span class='clj-long'>2</span>","value":"2"}],"value":"(\"2015-10-05T00:00:00.000-07:00\" 2)"}],"value":"((\"2015-09-22T00:00:00.000-07:00\" 2) (\"2015-09-25T00:00:00.000-07:00\" 1) (\"2015-09-27T00:00:00.000-07:00\" 1) (\"2015-09-28T00:00:00.000-07:00\" 2) (\"2015-09-30T00:00:00.000-07:00\" 1) (\"2015-10-01T00:00:00.000-07:00\" 1) (\"2015-10-02T00:00:00.000-07:00\" 2) (\"2015-10-03T00:00:00.000-07:00\" 3) (\"2015-10-04T00:00:00.000-07:00\" 1) (\"2015-10-05T00:00:00.000-07:00\" 2))"}],"value":"[:rows ((\"2015-09-22T00:00:00.000-07:00\" 2) (\"2015-09-25T00:00:00.000-07:00\" 1) (\"2015-09-27T00:00:00.000-07:00\" 1) (\"2015-09-28T00:00:00.000-07:00\" 2) (\"2015-09-30T00:00:00.000-07:00\" 1) (\"2015-10-01T00:00:00.000-07:00\" 1) (\"2015-10-02T00:00:00.000-07:00\" 2) (\"2015-10-03T00:00:00.000-07:00\" 3) (\"2015-10-04T00:00:00.000-07:00\" 1) (\"2015-10-05T00:00:00.000-07:00\" 2))]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:columns</span>","value":":columns"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;CREATED_AT&quot;</span>","value":"\"CREATED_AT\""},{"type":"html","content":"<span class='clj-string'>&quot;count&quot;</span>","value":"\"count\""}],"value":"[\"CREATED_AT\" \"count\"]"}],"value":"[:columns [\"CREATED_AT\" \"count\"]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:native_form</span>","value":":native_form"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:query</span>","value":":query"},{"type":"html","content":"<span class='clj-string'>&quot;SELECT count(*) AS \\&quot;count\\&quot;, CAST(\\&quot;PUBLIC\\&quot;.\\&quot;ORDERS\\&quot;.\\&quot;CREATED_AT\\&quot; AS date) AS \\&quot;CREATED_AT\\&quot; FROM \\&quot;PUBLIC\\&quot;.\\&quot;ORDERS\\&quot; GROUP BY CAST(\\&quot;PUBLIC\\&quot;.\\&quot;ORDERS\\&quot;.\\&quot;CREATED_AT\\&quot; AS date) ORDER BY CAST(\\&quot;PUBLIC\\&quot;.\\&quot;ORDERS\\&quot;.\\&quot;CREATED_AT\\&quot; AS date) ASC LIMIT 10&quot;</span>","value":"\"SELECT count(*) AS \\\"count\\\", CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) AS \\\"CREATED_AT\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" GROUP BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ORDER BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ASC LIMIT 10\""}],"value":"[:query \"SELECT count(*) AS \\\"count\\\", CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) AS \\\"CREATED_AT\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" GROUP BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ORDER BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ASC LIMIT 10\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:params nil]"}],"value":"{:query \"SELECT count(*) AS \\\"count\\\", CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) AS \\\"CREATED_AT\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" GROUP BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ORDER BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ASC LIMIT 10\", :params nil}"}],"value":"[:native_form {:query \"SELECT count(*) AS \\\"count\\\", CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) AS \\\"CREATED_AT\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" GROUP BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ORDER BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ASC LIMIT 10\", :params nil}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:cols</span>","value":":cols"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:description</span>","value":":description"},{"type":"html","content":"<span class='clj-string'>&quot;The date and time an order was submitted.&quot;</span>","value":"\"The date and time an order was submitted.\""}],"value":"[:description \"The date and time an order was submitted.\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:table_id</span>","value":":table_id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:table_id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:schema_name</span>","value":":schema_name"},{"type":"html","content":"<span class='clj-string'>&quot;PUBLIC&quot;</span>","value":"\"PUBLIC\""}],"value":"[:schema_name \"PUBLIC\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:special_type</span>","value":":special_type"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:special_type nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:unit</span>","value":":unit"},{"type":"html","content":"<span class='clj-keyword'>:day</span>","value":":day"}],"value":"[:unit :day]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-string'>&quot;CREATED_AT&quot;</span>","value":"\"CREATED_AT\""}],"value":"[:name \"CREATED_AT\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:source</span>","value":":source"},{"type":"html","content":"<span class='clj-keyword'>:breakout</span>","value":":breakout"}],"value":"[:source :breakout]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:extra_info</span>","value":":extra_info"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:extra_info {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:fk_field_id</span>","value":":fk_field_id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:fk_field_id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:visibility_type</span>","value":":visibility_type"},{"type":"html","content":"<span class='clj-keyword'>:normal</span>","value":":normal"}],"value":"[:visibility_type :normal]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:target</span>","value":":target"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:target nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:display_name</span>","value":":display_name"},{"type":"html","content":"<span class='clj-string'>&quot;Created At&quot;</span>","value":"\"Created At\""}],"value":"[:display_name \"Created At\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:base_type</span>","value":":base_type"},{"type":"html","content":"<span class='clj-keyword'>:type/DateTime</span>","value":":type/DateTime"}],"value":"[:base_type :type/DateTime]"}],"value":"{:description \"The date and time an order was submitted.\", :table_id 1, :schema_name \"PUBLIC\", :special_type nil, :unit :day, :name \"CREATED_AT\", :source :breakout, :extra_info {}, :fk_field_id nil, :id 1, :visibility_type :normal, :target nil, :display_name \"Created At\", :base_type :type/DateTime}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:description</span>","value":":description"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:description nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:table_id</span>","value":":table_id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:table_id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:special_type</span>","value":":special_type"},{"type":"html","content":"<span class='clj-keyword'>:type/Number</span>","value":":type/Number"}],"value":"[:special_type :type/Number]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-string'>&quot;count&quot;</span>","value":"\"count\""}],"value":"[:name \"count\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:source</span>","value":":source"},{"type":"html","content":"<span class='clj-keyword'>:aggregation</span>","value":":aggregation"}],"value":"[:source :aggregation]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:extra_info</span>","value":":extra_info"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:extra_info {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:target</span>","value":":target"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:target nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:display_name</span>","value":":display_name"},{"type":"html","content":"<span class='clj-string'>&quot;count&quot;</span>","value":"\"count\""}],"value":"[:display_name \"count\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:base_type</span>","value":":base_type"},{"type":"html","content":"<span class='clj-keyword'>:type/Integer</span>","value":":type/Integer"}],"value":"[:base_type :type/Integer]"}],"value":"{:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}"}],"value":"[{:description \"The date and time an order was submitted.\", :table_id 1, :schema_name \"PUBLIC\", :special_type nil, :unit :day, :name \"CREATED_AT\", :source :breakout, :extra_info {}, :fk_field_id nil, :id 1, :visibility_type :normal, :target nil, :display_name \"Created At\", :base_type :type/DateTime} {:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}]"}],"value":"[:cols [{:description \"The date and time an order was submitted.\", :table_id 1, :schema_name \"PUBLIC\", :special_type nil, :unit :day, :name \"CREATED_AT\", :source :breakout, :extra_info {}, :fk_field_id nil, :id 1, :visibility_type :normal, :target nil, :display_name \"Created At\", :base_type :type/DateTime} {:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}]]"}],"value":"{:rows ((\"2015-09-22T00:00:00.000-07:00\" 2) (\"2015-09-25T00:00:00.000-07:00\" 1) (\"2015-09-27T00:00:00.000-07:00\" 1) (\"2015-09-28T00:00:00.000-07:00\" 2) (\"2015-09-30T00:00:00.000-07:00\" 1) (\"2015-10-01T00:00:00.000-07:00\" 1) (\"2015-10-02T00:00:00.000-07:00\" 2) (\"2015-10-03T00:00:00.000-07:00\" 3) (\"2015-10-04T00:00:00.000-07:00\" 1) (\"2015-10-05T00:00:00.000-07:00\" 2)), :columns [\"CREATED_AT\" \"count\"], :native_form {:query \"SELECT count(*) AS \\\"count\\\", CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) AS \\\"CREATED_AT\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" GROUP BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ORDER BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ASC LIMIT 10\", :params nil}, :cols [{:description \"The date and time an order was submitted.\", :table_id 1, :schema_name \"PUBLIC\", :special_type nil, :unit :day, :name \"CREATED_AT\", :source :breakout, :extra_info {}, :fk_field_id nil, :id 1, :visibility_type :normal, :target nil, :display_name \"Created At\", :base_type :type/DateTime} {:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}]}"}],"value":"[:data {:rows ((\"2015-09-22T00:00:00.000-07:00\" 2) (\"2015-09-25T00:00:00.000-07:00\" 1) (\"2015-09-27T00:00:00.000-07:00\" 1) (\"2015-09-28T00:00:00.000-07:00\" 2) (\"2015-09-30T00:00:00.000-07:00\" 1) (\"2015-10-01T00:00:00.000-07:00\" 1) (\"2015-10-02T00:00:00.000-07:00\" 2) (\"2015-10-03T00:00:00.000-07:00\" 3) (\"2015-10-04T00:00:00.000-07:00\" 1) (\"2015-10-05T00:00:00.000-07:00\" 2)), :columns [\"CREATED_AT\" \"count\"], :native_form {:query \"SELECT count(*) AS \\\"count\\\", CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) AS \\\"CREATED_AT\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" GROUP BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ORDER BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ASC LIMIT 10\", :params nil}, :cols [{:description \"The date and time an order was submitted.\", :table_id 1, :schema_name \"PUBLIC\", :special_type nil, :unit :day, :name \"CREATED_AT\", :source :breakout, :extra_info {}, :fk_field_id nil, :id 1, :visibility_type :normal, :target nil, :display_name \"Created At\", :base_type :type/DateTime} {:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}]}]"}],"value":"{:row_count 10, :status :completed, :data {:rows ((\"2015-09-22T00:00:00.000-07:00\" 2) (\"2015-09-25T00:00:00.000-07:00\" 1) (\"2015-09-27T00:00:00.000-07:00\" 1) (\"2015-09-28T00:00:00.000-07:00\" 2) (\"2015-09-30T00:00:00.000-07:00\" 1) (\"2015-10-01T00:00:00.000-07:00\" 1) (\"2015-10-02T00:00:00.000-07:00\" 2) (\"2015-10-03T00:00:00.000-07:00\" 3) (\"2015-10-04T00:00:00.000-07:00\" 1) (\"2015-10-05T00:00:00.000-07:00\" 2)), :columns [\"CREATED_AT\" \"count\"], :native_form {:query \"SELECT count(*) AS \\\"count\\\", CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) AS \\\"CREATED_AT\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" GROUP BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ORDER BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ASC LIMIT 10\", :params nil}, :cols [{:description \"The date and time an order was submitted.\", :table_id 1, :schema_name \"PUBLIC\", :special_type nil, :unit :day, :name \"CREATED_AT\", :source :breakout, :extra_info {}, :fk_field_id nil, :id 1, :visibility_type :normal, :target nil, :display_name \"Created At\", :base_type :type/DateTime} {:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}]}}"}
;; <=

;; **
;;; # Metrics
;; **

;; @@
; how do I fetch a metric by id?
(toucan.db/select-one 'Metric :id 1)


;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:description</span>","value":":description"},{"type":"html","content":"<span class='clj-string'>&quot;Number of Doohickies&quot;</span>","value":"\"Number of Doohickies\""}],"value":"[:description \"Number of Doohickies\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:table_id</span>","value":":table_id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:table_id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:definition</span>","value":":definition"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:aggregation</span>","value":":aggregation"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;count&quot;</span>","value":"\"count\""}],"value":"[\"count\"]"}],"value":"[[\"count\"]]"}],"value":"[:aggregation [[\"count\"]]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:source_table</span>","value":":source_table"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:source_table 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:filter</span>","value":":filter"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;=&quot;</span>","value":"\"=\""},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;fk-&gt;&quot;</span>","value":"\"fk->\""},{"type":"html","content":"<span class='clj-unkown'>3</span>","value":"3"},{"type":"html","content":"<span class='clj-unkown'>21</span>","value":"21"}],"value":"[\"fk->\" 3 21]"},{"type":"html","content":"<span class='clj-string'>&quot;Doohickey&quot;</span>","value":"\"Doohickey\""}],"value":"[\"=\" [\"fk->\" 3 21] \"Doohickey\"]"}],"value":"[:filter [\"=\" [\"fk->\" 3 21] \"Doohickey\"]]"}],"value":"{:aggregation [[\"count\"]], :source_table 1, :filter [\"=\" [\"fk->\" 3 21] \"Doohickey\"]}"}],"value":"[:definition {:aggregation [[\"count\"]], :source_table 1, :filter [\"=\" [\"fk->\" 3 21] \"Doohickey\"]}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:show_in_getting_started</span>","value":":show_in_getting_started"},{"type":"html","content":"<span class='clj-unkown'>false</span>","value":"false"}],"value":"[:show_in_getting_started false]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-string'>&quot;# Doohickey&quot;</span>","value":"\"# Doohickey\""}],"value":"[:name \"# Doohickey\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:is_active</span>","value":":is_active"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:is_active true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:caveats</span>","value":":caveats"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:caveats nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:creator_id</span>","value":":creator_id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:creator_id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:updated_at</span>","value":":updated_at"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-23T20:18:49.593000000-00:00&quot;</span>","value":"#inst \"2016-12-23T20:18:49.593000000-00:00\""}],"value":"[:updated_at #inst \"2016-12-23T20:18:49.593000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:how_is_this_calculated</span>","value":":how_is_this_calculated"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:how_is_this_calculated nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:created_at</span>","value":":created_at"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-23T20:18:49.593000000-00:00&quot;</span>","value":"#inst \"2016-12-23T20:18:49.593000000-00:00\""}],"value":"[:created_at #inst \"2016-12-23T20:18:49.593000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:points_of_interest</span>","value":":points_of_interest"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:points_of_interest nil]"}],"value":"#metabase.models.metric.MetricInstance{:description \"Number of Doohickies\", :table_id 1, :definition {:aggregation [[\"count\"]], :source_table 1, :filter [\"=\" [\"fk->\" 3 21] \"Doohickey\"]}, :show_in_getting_started false, :name \"# Doohickey\", :is_active true, :caveats nil, :creator_id 1, :updated_at #inst \"2016-12-23T20:18:49.593000000-00:00\", :id 1, :how_is_this_calculated nil, :created_at #inst \"2016-12-23T20:18:49.593000000-00:00\", :points_of_interest nil}"}
;; <=

;; @@
; how do I get all dimensions (eg all attached fields) for a metric?
(let [table_id ((toucan.db/select-one-field :definition 'Metric :id 1) :source_table)]
  (toucan.db/select 'Field :table_id table_id))
;; @@

;; @@


; how do I get the type of each dimension?
(toucan.db/select-one-field :base_type 'Field :id 1)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-keyword'>:type/DateTime</span>","value":":type/DateTime"}
;; <=

;; @@
; how do I calculate the metric
(metabase.query-processor/process-query
  {:database 1
   :type :query
   :query  {:source_table 1, :aggregation [["METRIC" 1]]}})
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:row_count</span>","value":":row_count"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:row_count 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:status</span>","value":":status"},{"type":"html","content":"<span class='clj-keyword'>:completed</span>","value":":completed"}],"value":"[:status :completed]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:data</span>","value":":data"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rows</span>","value":":rows"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>4907</span>","value":"4907"}],"value":"(4907)"}],"value":"((4907))"}],"value":"[:rows ((4907))]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:columns</span>","value":":columns"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;count&quot;</span>","value":"\"count\""}],"value":"[\"count\"]"}],"value":"[:columns [\"count\"]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:native_form</span>","value":":native_form"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:query</span>","value":":query"},{"type":"html","content":"<span class='clj-string'>&quot;SELECT count(*) AS \\&quot;count\\&quot; FROM \\&quot;PUBLIC\\&quot;.\\&quot;ORDERS\\&quot; LEFT JOIN \\&quot;PUBLIC\\&quot;.\\&quot;PRODUCTS\\&quot; \\&quot;PRODUCTS__via__PRODUCT_ID\\&quot; ON \\&quot;PUBLIC\\&quot;.\\&quot;ORDERS\\&quot;.\\&quot;PRODUCT_ID\\&quot; = \\&quot;PRODUCTS__via__PRODUCT_ID\\&quot;.\\&quot;ID\\&quot; WHERE \\&quot;PRODUCTS__via__PRODUCT_ID\\&quot;.\\&quot;CATEGORY\\&quot; = ?&quot;</span>","value":"\"SELECT count(*) AS \\\"count\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" LEFT JOIN \\\"PUBLIC\\\".\\\"PRODUCTS\\\" \\\"PRODUCTS__via__PRODUCT_ID\\\" ON \\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"PRODUCT_ID\\\" = \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"ID\\\" WHERE \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"CATEGORY\\\" = ?\""}],"value":"[:query \"SELECT count(*) AS \\\"count\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" LEFT JOIN \\\"PUBLIC\\\".\\\"PRODUCTS\\\" \\\"PRODUCTS__via__PRODUCT_ID\\\" ON \\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"PRODUCT_ID\\\" = \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"ID\\\" WHERE \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"CATEGORY\\\" = ?\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"html","content":"<span class='clj-unkown'>(&quot;Doohickey&quot;)</span>","value":"(\"Doohickey\")"}],"value":"[:params (\"Doohickey\")]"}],"value":"{:query \"SELECT count(*) AS \\\"count\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" LEFT JOIN \\\"PUBLIC\\\".\\\"PRODUCTS\\\" \\\"PRODUCTS__via__PRODUCT_ID\\\" ON \\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"PRODUCT_ID\\\" = \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"ID\\\" WHERE \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"CATEGORY\\\" = ?\", :params (\"Doohickey\")}"}],"value":"[:native_form {:query \"SELECT count(*) AS \\\"count\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" LEFT JOIN \\\"PUBLIC\\\".\\\"PRODUCTS\\\" \\\"PRODUCTS__via__PRODUCT_ID\\\" ON \\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"PRODUCT_ID\\\" = \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"ID\\\" WHERE \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"CATEGORY\\\" = ?\", :params (\"Doohickey\")}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:cols</span>","value":":cols"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:description</span>","value":":description"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:description nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:table_id</span>","value":":table_id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:table_id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:special_type</span>","value":":special_type"},{"type":"html","content":"<span class='clj-keyword'>:type/Number</span>","value":":type/Number"}],"value":"[:special_type :type/Number]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-string'>&quot;count&quot;</span>","value":"\"count\""}],"value":"[:name \"count\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:source</span>","value":":source"},{"type":"html","content":"<span class='clj-keyword'>:aggregation</span>","value":":aggregation"}],"value":"[:source :aggregation]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:extra_info</span>","value":":extra_info"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:extra_info {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:target</span>","value":":target"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:target nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:display_name</span>","value":":display_name"},{"type":"html","content":"<span class='clj-string'>&quot;count&quot;</span>","value":"\"count\""}],"value":"[:display_name \"count\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:base_type</span>","value":":base_type"},{"type":"html","content":"<span class='clj-keyword'>:type/Integer</span>","value":":type/Integer"}],"value":"[:base_type :type/Integer]"}],"value":"{:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}"}],"value":"[{:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}]"}],"value":"[:cols [{:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}]]"}],"value":"{:rows ((4907)), :columns [\"count\"], :native_form {:query \"SELECT count(*) AS \\\"count\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" LEFT JOIN \\\"PUBLIC\\\".\\\"PRODUCTS\\\" \\\"PRODUCTS__via__PRODUCT_ID\\\" ON \\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"PRODUCT_ID\\\" = \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"ID\\\" WHERE \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"CATEGORY\\\" = ?\", :params (\"Doohickey\")}, :cols [{:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}]}"}],"value":"[:data {:rows ((4907)), :columns [\"count\"], :native_form {:query \"SELECT count(*) AS \\\"count\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" LEFT JOIN \\\"PUBLIC\\\".\\\"PRODUCTS\\\" \\\"PRODUCTS__via__PRODUCT_ID\\\" ON \\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"PRODUCT_ID\\\" = \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"ID\\\" WHERE \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"CATEGORY\\\" = ?\", :params (\"Doohickey\")}, :cols [{:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}]}]"}],"value":"{:row_count 1, :status :completed, :data {:rows ((4907)), :columns [\"count\"], :native_form {:query \"SELECT count(*) AS \\\"count\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" LEFT JOIN \\\"PUBLIC\\\".\\\"PRODUCTS\\\" \\\"PRODUCTS__via__PRODUCT_ID\\\" ON \\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"PRODUCT_ID\\\" = \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"ID\\\" WHERE \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"CATEGORY\\\" = ?\", :params (\"Doohickey\")}, :cols [{:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}]}}"}
;; <=

;; @@
; how do I get a metric broken out by one of its dimensions?
(let [table_id ((toucan.db/select-one-field :definition 'Metric :id 1) :source_table)
      first_dimension ((first (toucan.db/select 'Field :table_id table_id)) :id)]
  (metabase.query-processor/process-query
  {:database 1
   :type :query
   :query  {:source_table table_id, 
            :aggregation [["METRIC" 1]]
            :breakout [[:field-id first_dimension]]
            :limit 10}}))
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:row_count</span>","value":":row_count"},{"type":"html","content":"<span class='clj-unkown'>10</span>","value":"10"}],"value":"[:row_count 10]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:status</span>","value":":status"},{"type":"html","content":"<span class='clj-keyword'>:completed</span>","value":":completed"}],"value":"[:status :completed]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:data</span>","value":":data"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rows</span>","value":":rows"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2015-09-27T00:00:00.000-07:00&quot;</span>","value":"\"2015-09-27T00:00:00.000-07:00\""},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"(\"2015-09-27T00:00:00.000-07:00\" 1)"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2015-09-28T00:00:00.000-07:00&quot;</span>","value":"\"2015-09-28T00:00:00.000-07:00\""},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"(\"2015-09-28T00:00:00.000-07:00\" 1)"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2015-10-17T00:00:00.000-07:00&quot;</span>","value":"\"2015-10-17T00:00:00.000-07:00\""},{"type":"html","content":"<span class='clj-long'>2</span>","value":"2"}],"value":"(\"2015-10-17T00:00:00.000-07:00\" 2)"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2015-10-18T00:00:00.000-07:00&quot;</span>","value":"\"2015-10-18T00:00:00.000-07:00\""},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"(\"2015-10-18T00:00:00.000-07:00\" 1)"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2015-10-21T00:00:00.000-07:00&quot;</span>","value":"\"2015-10-21T00:00:00.000-07:00\""},{"type":"html","content":"<span class='clj-long'>2</span>","value":"2"}],"value":"(\"2015-10-21T00:00:00.000-07:00\" 2)"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2015-10-23T00:00:00.000-07:00&quot;</span>","value":"\"2015-10-23T00:00:00.000-07:00\""},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"(\"2015-10-23T00:00:00.000-07:00\" 1)"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2015-10-25T00:00:00.000-07:00&quot;</span>","value":"\"2015-10-25T00:00:00.000-07:00\""},{"type":"html","content":"<span class='clj-long'>2</span>","value":"2"}],"value":"(\"2015-10-25T00:00:00.000-07:00\" 2)"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2015-10-28T00:00:00.000-07:00&quot;</span>","value":"\"2015-10-28T00:00:00.000-07:00\""},{"type":"html","content":"<span class='clj-long'>2</span>","value":"2"}],"value":"(\"2015-10-28T00:00:00.000-07:00\" 2)"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2015-10-31T00:00:00.000-07:00&quot;</span>","value":"\"2015-10-31T00:00:00.000-07:00\""},{"type":"html","content":"<span class='clj-long'>2</span>","value":"2"}],"value":"(\"2015-10-31T00:00:00.000-07:00\" 2)"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;2015-11-02T00:00:00.000-08:00&quot;</span>","value":"\"2015-11-02T00:00:00.000-08:00\""},{"type":"html","content":"<span class='clj-long'>1</span>","value":"1"}],"value":"(\"2015-11-02T00:00:00.000-08:00\" 1)"}],"value":"((\"2015-09-27T00:00:00.000-07:00\" 1) (\"2015-09-28T00:00:00.000-07:00\" 1) (\"2015-10-17T00:00:00.000-07:00\" 2) (\"2015-10-18T00:00:00.000-07:00\" 1) (\"2015-10-21T00:00:00.000-07:00\" 2) (\"2015-10-23T00:00:00.000-07:00\" 1) (\"2015-10-25T00:00:00.000-07:00\" 2) (\"2015-10-28T00:00:00.000-07:00\" 2) (\"2015-10-31T00:00:00.000-07:00\" 2) (\"2015-11-02T00:00:00.000-08:00\" 1))"}],"value":"[:rows ((\"2015-09-27T00:00:00.000-07:00\" 1) (\"2015-09-28T00:00:00.000-07:00\" 1) (\"2015-10-17T00:00:00.000-07:00\" 2) (\"2015-10-18T00:00:00.000-07:00\" 1) (\"2015-10-21T00:00:00.000-07:00\" 2) (\"2015-10-23T00:00:00.000-07:00\" 1) (\"2015-10-25T00:00:00.000-07:00\" 2) (\"2015-10-28T00:00:00.000-07:00\" 2) (\"2015-10-31T00:00:00.000-07:00\" 2) (\"2015-11-02T00:00:00.000-08:00\" 1))]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:columns</span>","value":":columns"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;CREATED_AT&quot;</span>","value":"\"CREATED_AT\""},{"type":"html","content":"<span class='clj-string'>&quot;count&quot;</span>","value":"\"count\""}],"value":"[\"CREATED_AT\" \"count\"]"}],"value":"[:columns [\"CREATED_AT\" \"count\"]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:native_form</span>","value":":native_form"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:query</span>","value":":query"},{"type":"html","content":"<span class='clj-string'>&quot;SELECT count(*) AS \\&quot;count\\&quot;, CAST(\\&quot;PUBLIC\\&quot;.\\&quot;ORDERS\\&quot;.\\&quot;CREATED_AT\\&quot; AS date) AS \\&quot;CREATED_AT\\&quot; FROM \\&quot;PUBLIC\\&quot;.\\&quot;ORDERS\\&quot; LEFT JOIN \\&quot;PUBLIC\\&quot;.\\&quot;PRODUCTS\\&quot; \\&quot;PRODUCTS__via__PRODUCT_ID\\&quot; ON \\&quot;PUBLIC\\&quot;.\\&quot;ORDERS\\&quot;.\\&quot;PRODUCT_ID\\&quot; = \\&quot;PRODUCTS__via__PRODUCT_ID\\&quot;.\\&quot;ID\\&quot; WHERE \\&quot;PRODUCTS__via__PRODUCT_ID\\&quot;.\\&quot;CATEGORY\\&quot; = ? GROUP BY CAST(\\&quot;PUBLIC\\&quot;.\\&quot;ORDERS\\&quot;.\\&quot;CREATED_AT\\&quot; AS date) ORDER BY CAST(\\&quot;PUBLIC\\&quot;.\\&quot;ORDERS\\&quot;.\\&quot;CREATED_AT\\&quot; AS date) ASC LIMIT 10&quot;</span>","value":"\"SELECT count(*) AS \\\"count\\\", CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) AS \\\"CREATED_AT\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" LEFT JOIN \\\"PUBLIC\\\".\\\"PRODUCTS\\\" \\\"PRODUCTS__via__PRODUCT_ID\\\" ON \\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"PRODUCT_ID\\\" = \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"ID\\\" WHERE \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"CATEGORY\\\" = ? GROUP BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ORDER BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ASC LIMIT 10\""}],"value":"[:query \"SELECT count(*) AS \\\"count\\\", CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) AS \\\"CREATED_AT\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" LEFT JOIN \\\"PUBLIC\\\".\\\"PRODUCTS\\\" \\\"PRODUCTS__via__PRODUCT_ID\\\" ON \\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"PRODUCT_ID\\\" = \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"ID\\\" WHERE \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"CATEGORY\\\" = ? GROUP BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ORDER BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ASC LIMIT 10\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"html","content":"<span class='clj-unkown'>(&quot;Doohickey&quot;)</span>","value":"(\"Doohickey\")"}],"value":"[:params (\"Doohickey\")]"}],"value":"{:query \"SELECT count(*) AS \\\"count\\\", CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) AS \\\"CREATED_AT\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" LEFT JOIN \\\"PUBLIC\\\".\\\"PRODUCTS\\\" \\\"PRODUCTS__via__PRODUCT_ID\\\" ON \\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"PRODUCT_ID\\\" = \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"ID\\\" WHERE \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"CATEGORY\\\" = ? GROUP BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ORDER BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ASC LIMIT 10\", :params (\"Doohickey\")}"}],"value":"[:native_form {:query \"SELECT count(*) AS \\\"count\\\", CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) AS \\\"CREATED_AT\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" LEFT JOIN \\\"PUBLIC\\\".\\\"PRODUCTS\\\" \\\"PRODUCTS__via__PRODUCT_ID\\\" ON \\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"PRODUCT_ID\\\" = \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"ID\\\" WHERE \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"CATEGORY\\\" = ? GROUP BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ORDER BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ASC LIMIT 10\", :params (\"Doohickey\")}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:cols</span>","value":":cols"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:description</span>","value":":description"},{"type":"html","content":"<span class='clj-string'>&quot;The date and time an order was submitted.&quot;</span>","value":"\"The date and time an order was submitted.\""}],"value":"[:description \"The date and time an order was submitted.\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:table_id</span>","value":":table_id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:table_id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:schema_name</span>","value":":schema_name"},{"type":"html","content":"<span class='clj-string'>&quot;PUBLIC&quot;</span>","value":"\"PUBLIC\""}],"value":"[:schema_name \"PUBLIC\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:special_type</span>","value":":special_type"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:special_type nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:unit</span>","value":":unit"},{"type":"html","content":"<span class='clj-keyword'>:day</span>","value":":day"}],"value":"[:unit :day]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-string'>&quot;CREATED_AT&quot;</span>","value":"\"CREATED_AT\""}],"value":"[:name \"CREATED_AT\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:source</span>","value":":source"},{"type":"html","content":"<span class='clj-keyword'>:breakout</span>","value":":breakout"}],"value":"[:source :breakout]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:extra_info</span>","value":":extra_info"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:extra_info {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:fk_field_id</span>","value":":fk_field_id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:fk_field_id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:visibility_type</span>","value":":visibility_type"},{"type":"html","content":"<span class='clj-keyword'>:normal</span>","value":":normal"}],"value":"[:visibility_type :normal]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:target</span>","value":":target"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:target nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:display_name</span>","value":":display_name"},{"type":"html","content":"<span class='clj-string'>&quot;Created At&quot;</span>","value":"\"Created At\""}],"value":"[:display_name \"Created At\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:base_type</span>","value":":base_type"},{"type":"html","content":"<span class='clj-keyword'>:type/DateTime</span>","value":":type/DateTime"}],"value":"[:base_type :type/DateTime]"}],"value":"{:description \"The date and time an order was submitted.\", :table_id 1, :schema_name \"PUBLIC\", :special_type nil, :unit :day, :name \"CREATED_AT\", :source :breakout, :extra_info {}, :fk_field_id nil, :id 1, :visibility_type :normal, :target nil, :display_name \"Created At\", :base_type :type/DateTime}"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:description</span>","value":":description"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:description nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:table_id</span>","value":":table_id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:table_id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:special_type</span>","value":":special_type"},{"type":"html","content":"<span class='clj-keyword'>:type/Number</span>","value":":type/Number"}],"value":"[:special_type :type/Number]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-string'>&quot;count&quot;</span>","value":"\"count\""}],"value":"[:name \"count\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:source</span>","value":":source"},{"type":"html","content":"<span class='clj-keyword'>:aggregation</span>","value":":aggregation"}],"value":"[:source :aggregation]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:extra_info</span>","value":":extra_info"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:extra_info {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:target</span>","value":":target"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:target nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:display_name</span>","value":":display_name"},{"type":"html","content":"<span class='clj-string'>&quot;count&quot;</span>","value":"\"count\""}],"value":"[:display_name \"count\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:base_type</span>","value":":base_type"},{"type":"html","content":"<span class='clj-keyword'>:type/Integer</span>","value":":type/Integer"}],"value":"[:base_type :type/Integer]"}],"value":"{:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}"}],"value":"[{:description \"The date and time an order was submitted.\", :table_id 1, :schema_name \"PUBLIC\", :special_type nil, :unit :day, :name \"CREATED_AT\", :source :breakout, :extra_info {}, :fk_field_id nil, :id 1, :visibility_type :normal, :target nil, :display_name \"Created At\", :base_type :type/DateTime} {:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}]"}],"value":"[:cols [{:description \"The date and time an order was submitted.\", :table_id 1, :schema_name \"PUBLIC\", :special_type nil, :unit :day, :name \"CREATED_AT\", :source :breakout, :extra_info {}, :fk_field_id nil, :id 1, :visibility_type :normal, :target nil, :display_name \"Created At\", :base_type :type/DateTime} {:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}]]"}],"value":"{:rows ((\"2015-09-27T00:00:00.000-07:00\" 1) (\"2015-09-28T00:00:00.000-07:00\" 1) (\"2015-10-17T00:00:00.000-07:00\" 2) (\"2015-10-18T00:00:00.000-07:00\" 1) (\"2015-10-21T00:00:00.000-07:00\" 2) (\"2015-10-23T00:00:00.000-07:00\" 1) (\"2015-10-25T00:00:00.000-07:00\" 2) (\"2015-10-28T00:00:00.000-07:00\" 2) (\"2015-10-31T00:00:00.000-07:00\" 2) (\"2015-11-02T00:00:00.000-08:00\" 1)), :columns [\"CREATED_AT\" \"count\"], :native_form {:query \"SELECT count(*) AS \\\"count\\\", CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) AS \\\"CREATED_AT\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" LEFT JOIN \\\"PUBLIC\\\".\\\"PRODUCTS\\\" \\\"PRODUCTS__via__PRODUCT_ID\\\" ON \\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"PRODUCT_ID\\\" = \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"ID\\\" WHERE \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"CATEGORY\\\" = ? GROUP BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ORDER BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ASC LIMIT 10\", :params (\"Doohickey\")}, :cols [{:description \"The date and time an order was submitted.\", :table_id 1, :schema_name \"PUBLIC\", :special_type nil, :unit :day, :name \"CREATED_AT\", :source :breakout, :extra_info {}, :fk_field_id nil, :id 1, :visibility_type :normal, :target nil, :display_name \"Created At\", :base_type :type/DateTime} {:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}]}"}],"value":"[:data {:rows ((\"2015-09-27T00:00:00.000-07:00\" 1) (\"2015-09-28T00:00:00.000-07:00\" 1) (\"2015-10-17T00:00:00.000-07:00\" 2) (\"2015-10-18T00:00:00.000-07:00\" 1) (\"2015-10-21T00:00:00.000-07:00\" 2) (\"2015-10-23T00:00:00.000-07:00\" 1) (\"2015-10-25T00:00:00.000-07:00\" 2) (\"2015-10-28T00:00:00.000-07:00\" 2) (\"2015-10-31T00:00:00.000-07:00\" 2) (\"2015-11-02T00:00:00.000-08:00\" 1)), :columns [\"CREATED_AT\" \"count\"], :native_form {:query \"SELECT count(*) AS \\\"count\\\", CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) AS \\\"CREATED_AT\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" LEFT JOIN \\\"PUBLIC\\\".\\\"PRODUCTS\\\" \\\"PRODUCTS__via__PRODUCT_ID\\\" ON \\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"PRODUCT_ID\\\" = \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"ID\\\" WHERE \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"CATEGORY\\\" = ? GROUP BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ORDER BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ASC LIMIT 10\", :params (\"Doohickey\")}, :cols [{:description \"The date and time an order was submitted.\", :table_id 1, :schema_name \"PUBLIC\", :special_type nil, :unit :day, :name \"CREATED_AT\", :source :breakout, :extra_info {}, :fk_field_id nil, :id 1, :visibility_type :normal, :target nil, :display_name \"Created At\", :base_type :type/DateTime} {:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}]}]"}],"value":"{:row_count 10, :status :completed, :data {:rows ((\"2015-09-27T00:00:00.000-07:00\" 1) (\"2015-09-28T00:00:00.000-07:00\" 1) (\"2015-10-17T00:00:00.000-07:00\" 2) (\"2015-10-18T00:00:00.000-07:00\" 1) (\"2015-10-21T00:00:00.000-07:00\" 2) (\"2015-10-23T00:00:00.000-07:00\" 1) (\"2015-10-25T00:00:00.000-07:00\" 2) (\"2015-10-28T00:00:00.000-07:00\" 2) (\"2015-10-31T00:00:00.000-07:00\" 2) (\"2015-11-02T00:00:00.000-08:00\" 1)), :columns [\"CREATED_AT\" \"count\"], :native_form {:query \"SELECT count(*) AS \\\"count\\\", CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) AS \\\"CREATED_AT\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\" LEFT JOIN \\\"PUBLIC\\\".\\\"PRODUCTS\\\" \\\"PRODUCTS__via__PRODUCT_ID\\\" ON \\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"PRODUCT_ID\\\" = \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"ID\\\" WHERE \\\"PRODUCTS__via__PRODUCT_ID\\\".\\\"CATEGORY\\\" = ? GROUP BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ORDER BY CAST(\\\"PUBLIC\\\".\\\"ORDERS\\\".\\\"CREATED_AT\\\" AS date) ASC LIMIT 10\", :params (\"Doohickey\")}, :cols [{:description \"The date and time an order was submitted.\", :table_id 1, :schema_name \"PUBLIC\", :special_type nil, :unit :day, :name \"CREATED_AT\", :source :breakout, :extra_info {}, :fk_field_id nil, :id 1, :visibility_type :normal, :target nil, :display_name \"Created At\", :base_type :type/DateTime} {:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}]}}"}
;; <=

;; @@
; how do I filter a metric on one of its dimensions?
;; @@

;; **
;;; # Saved questions
;; **

;; @@
(toucan.db/select-one 'Card :id 1)
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:description</span>","value":":description"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:description nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:archived</span>","value":":archived"},{"type":"html","content":"<span class='clj-unkown'>false</span>","value":"false"}],"value":"[:archived false]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:table_id</span>","value":":table_id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:table_id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:result_metadata</span>","value":":result_metadata"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:result_metadata nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:database_id</span>","value":":database_id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:database_id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:enable_embedding</span>","value":":enable_embedding"},{"type":"html","content":"<span class='clj-unkown'>true</span>","value":"true"}],"value":"[:enable_embedding true]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:collection_id</span>","value":":collection_id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:collection_id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:query_type</span>","value":":query_type"},{"type":"html","content":"<span class='clj-keyword'>:query</span>","value":":query"}],"value":"[:query_type :query]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-string'>&quot;Orders, Count&quot;</span>","value":"\"Orders, Count\""}],"value":"[:name \"Orders, Count\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:creator_id</span>","value":":creator_id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:creator_id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:updated_at</span>","value":":updated_at"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2017-02-18T02:48:07.927000000-00:00&quot;</span>","value":"#inst \"2017-02-18T02:48:07.927000000-00:00\""}],"value":"[:updated_at #inst \"2017-02-18T02:48:07.927000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:made_public_by_id</span>","value":":made_public_by_id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:made_public_by_id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:embedding_params</span>","value":":embedding_params"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:embedding_params {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:cache_ttl</span>","value":":cache_ttl"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:cache_ttl nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:dataset_query</span>","value":":dataset_query"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:database</span>","value":":database"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:database 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:type</span>","value":":type"},{"type":"html","content":"<span class='clj-string'>&quot;query&quot;</span>","value":"\"query\""}],"value":"[:type \"query\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:query</span>","value":":query"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:source_table</span>","value":":source_table"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:source_table 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:aggregation</span>","value":":aggregation"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;count&quot;</span>","value":"\"count\""}],"value":"[\"count\"]"}],"value":"[:aggregation [\"count\"]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:breakout</span>","value":":breakout"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[],"value":"[]"}],"value":"[:breakout []]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:filter</span>","value":":filter"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[],"value":"[]"}],"value":"[:filter []]"}],"value":"{:source_table 1, :aggregation [\"count\"], :breakout [], :filter []}"}],"value":"[:query {:source_table 1, :aggregation [\"count\"], :breakout [], :filter []}]"}],"value":"{:database 1, :type \"query\", :query {:source_table 1, :aggregation [\"count\"], :breakout [], :filter []}}"}],"value":"[:dataset_query {:database 1, :type \"query\", :query {:source_table 1, :aggregation [\"count\"], :breakout [], :filter []}}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:id 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:display</span>","value":":display"},{"type":"html","content":"<span class='clj-keyword'>:scalar</span>","value":":scalar"}],"value":"[:display :scalar]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:visualization_settings</span>","value":":visualization_settings"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:visualization_settings {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:created_at</span>","value":":created_at"},{"type":"html","content":"<span class='clj-unkown'>#inst &quot;2016-12-22T00:38:12.083000000-00:00&quot;</span>","value":"#inst \"2016-12-22T00:38:12.083000000-00:00\""}],"value":"[:created_at #inst \"2016-12-22T00:38:12.083000000-00:00\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:public_uuid</span>","value":":public_uuid"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:public_uuid nil]"}],"value":"#metabase.models.card.CardInstance{:description nil, :archived false, :table_id 1, :result_metadata nil, :database_id 1, :enable_embedding true, :collection_id 1, :query_type :query, :name \"Orders, Count\", :creator_id 1, :updated_at #inst \"2017-02-18T02:48:07.927000000-00:00\", :made_public_by_id nil, :embedding_params {}, :cache_ttl nil, :dataset_query {:database 1, :type \"query\", :query {:source_table 1, :aggregation [\"count\"], :breakout [], :filter []}}, :id 1, :display :scalar, :visualization_settings {}, :created_at #inst \"2016-12-22T00:38:12.083000000-00:00\", :public_uuid nil}"}
;; <=

;; @@
(metabase.query-processor/process-query ((toucan.db/select-one 'Card :id 1) :dataset_query))
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:row_count</span>","value":":row_count"},{"type":"html","content":"<span class='clj-unkown'>1</span>","value":"1"}],"value":"[:row_count 1]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:status</span>","value":":status"},{"type":"html","content":"<span class='clj-keyword'>:completed</span>","value":":completed"}],"value":"[:status :completed]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:data</span>","value":":data"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:rows</span>","value":":rows"},{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-long'>17624</span>","value":"17624"}],"value":"(17624)"}],"value":"((17624))"}],"value":"[:rows ((17624))]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:columns</span>","value":":columns"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-string'>&quot;count&quot;</span>","value":"\"count\""}],"value":"[\"count\"]"}],"value":"[:columns [\"count\"]]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:native_form</span>","value":":native_form"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:query</span>","value":":query"},{"type":"html","content":"<span class='clj-string'>&quot;SELECT count(*) AS \\&quot;count\\&quot; FROM \\&quot;PUBLIC\\&quot;.\\&quot;ORDERS\\&quot;&quot;</span>","value":"\"SELECT count(*) AS \\\"count\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\"\""}],"value":"[:query \"SELECT count(*) AS \\\"count\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\"\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:params</span>","value":":params"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:params nil]"}],"value":"{:query \"SELECT count(*) AS \\\"count\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\"\", :params nil}"}],"value":"[:native_form {:query \"SELECT count(*) AS \\\"count\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\"\", :params nil}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:cols</span>","value":":cols"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:description</span>","value":":description"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:description nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:table_id</span>","value":":table_id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:table_id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:special_type</span>","value":":special_type"},{"type":"html","content":"<span class='clj-keyword'>:type/Number</span>","value":":type/Number"}],"value":"[:special_type :type/Number]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:name</span>","value":":name"},{"type":"html","content":"<span class='clj-string'>&quot;count&quot;</span>","value":"\"count\""}],"value":"[:name \"count\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:source</span>","value":":source"},{"type":"html","content":"<span class='clj-keyword'>:aggregation</span>","value":":aggregation"}],"value":"[:source :aggregation]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:extra_info</span>","value":":extra_info"},{"type":"list-like","open":"<span class='clj-map'>{</span>","close":"<span class='clj-map'>}</span>","separator":", ","items":[],"value":"{}"}],"value":"[:extra_info {}]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:id</span>","value":":id"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:id nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:target</span>","value":":target"},{"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}],"value":"[:target nil]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:display_name</span>","value":":display_name"},{"type":"html","content":"<span class='clj-string'>&quot;count&quot;</span>","value":"\"count\""}],"value":"[:display_name \"count\"]"},{"type":"list-like","open":"","close":"","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:base_type</span>","value":":base_type"},{"type":"html","content":"<span class='clj-keyword'>:type/Integer</span>","value":":type/Integer"}],"value":"[:base_type :type/Integer]"}],"value":"{:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}"}],"value":"[{:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}]"}],"value":"[:cols [{:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}]]"}],"value":"{:rows ((17624)), :columns [\"count\"], :native_form {:query \"SELECT count(*) AS \\\"count\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\"\", :params nil}, :cols [{:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}]}"}],"value":"[:data {:rows ((17624)), :columns [\"count\"], :native_form {:query \"SELECT count(*) AS \\\"count\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\"\", :params nil}, :cols [{:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}]}]"}],"value":"{:row_count 1, :status :completed, :data {:rows ((17624)), :columns [\"count\"], :native_form {:query \"SELECT count(*) AS \\\"count\\\" FROM \\\"PUBLIC\\\".\\\"ORDERS\\\"\", :params nil}, :cols [{:description nil, :table_id nil, :special_type :type/Number, :name \"count\", :source :aggregation, :extra_info {}, :id nil, :target nil, :display_name \"count\", :base_type :type/Integer}]}}"}
;; <=

;; @@

;; @@
