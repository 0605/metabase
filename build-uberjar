#! /bin/bash

echo "Running 'npm install' to download javascript dependencies..." &&
npm install &&

echo "Running 'webpack -p' to assemble and minify frontend assets..."
./node_modules/webpack/bin/webpack.js -p &&

if [ -f resources/sample-dataset.db.mv.db ]; then
    echo "Sample Dataset already generated."
else
    echo "Running 'lein generate-sample-dataset' to generate the sample dataset..."
    lein generate-sample-dataset
fi &&

echo "Running 'lein uberjar'..." &&
lein uberjar
